{
    "_links": {
        "self": {
            "href": "http:\/\/default\/navody\/levny-continuous-deployment-pro-drupal-8?_format=hal_json"
        },
        "type": {
            "href": "http:\/\/drupal.org\/rest\/type\/node\/tutorial"
        },
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/revision_uid": [
            {
                "href": "http:\/\/default\/user\/martinklima?_format=hal_json"
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/uid": [
            {
                "href": "http:\/\/default\/user\/martinklima?_format=hal_json",
                "lang": "cs"
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/field_tags": [
            {
                "href": "http:\/\/default\/stitky\/development?_format=hal_json",
                "lang": "cs"
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/field_teaser_image": [
            {
                "href": "http:\/\/default\/media\/11?_format=hal_json",
                "lang": "cs"
            }
        ]
    },
    "nid": [
        {
            "value": 371546
        }
    ],
    "uuid": [
        {
            "value": "3f88a6ee-0d23-41a1-a6bb-06bfbc9a08b1"
        }
    ],
    "vid": [
        {
            "value": 374791
        }
    ],
    "langcode": [
        {
            "value": "cs",
            "lang": "cs"
        }
    ],
    "type": [
        {
            "target_id": "tutorial"
        }
    ],
    "revision_timestamp": [
        {
            "value": "2019-03-11T21:53:41+00:00",
            "format": "Y-m-d\\TH:i:sP"
        }
    ],
    "_embedded": {
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/revision_uid": [
            {
                "_links": {
                    "self": {
                        "href": "http:\/\/default\/user\/martinklima?_format=hal_json"
                    },
                    "type": {
                        "href": "http:\/\/drupal.org\/rest\/type\/user\/user"
                    }
                },
                "uuid": [
                    {
                        "value": "562772c7-9cf7-4157-b1cc-787734e49ab4"
                    }
                ]
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/uid": [
            {
                "_links": {
                    "self": {
                        "href": "http:\/\/default\/user\/martinklima?_format=hal_json"
                    },
                    "type": {
                        "href": "http:\/\/drupal.org\/rest\/type\/user\/user"
                    }
                },
                "uuid": [
                    {
                        "value": "562772c7-9cf7-4157-b1cc-787734e49ab4"
                    }
                ],
                "lang": "cs"
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/field_tags": [
            {
                "_links": {
                    "self": {
                        "href": "http:\/\/default\/stitky\/development?_format=hal_json"
                    },
                    "type": {
                        "href": "http:\/\/drupal.org\/rest\/type\/taxonomy_term\/tags"
                    }
                },
                "uuid": [
                    {
                        "value": "6b8d1cc9-6762-4deb-9a21-c10407564c05"
                    }
                ],
                "lang": "cs"
            }
        ],
        "http:\/\/drupal.org\/rest\/relation\/node\/tutorial\/field_teaser_image": [
            {
                "_links": {
                    "self": {
                        "href": "http:\/\/default\/media\/11?_format=hal_json"
                    },
                    "type": {
                        "href": "http:\/\/drupal.org\/rest\/type\/media\/image"
                    }
                },
                "uuid": [
                    {
                        "value": "5e655fd6-b546-4a76-9baa-1d02e70296bf"
                    }
                ],
                "lang": "cs"
            }
        ]
    },
    "status": [
        {
            "value": true,
            "lang": "cs"
        }
    ],
    "title": [
        {
            "value": "Levn\u00fd Continuous deployment pro Drupal 8",
            "lang": "cs"
        }
    ],
    "created": [
        {
            "value": "2018-12-09T18:52:13+00:00",
            "lang": "cs",
            "format": "Y-m-d\\TH:i:sP"
        }
    ],
    "changed": [
        {
            "value": "2019-03-11T21:56:42+00:00",
            "lang": "cs",
            "format": "Y-m-d\\TH:i:sP"
        }
    ],
    "promote": [
        {
            "value": false,
            "lang": "cs"
        }
    ],
    "sticky": [
        {
            "value": false,
            "lang": "cs"
        }
    ],
    "default_langcode": [
        {
            "value": true,
            "lang": "cs"
        }
    ],
    "revision_translation_affected": [
        {
            "value": true,
            "lang": "cs"
        }
    ],
    "metatag": [
        {
            "value": {
                "title": "Levn\u00fd Continuous deployment pro Drupal 8 | Drupal.cz",
                "og_site_name": "Drupal.cz",
                "canonical_url": "http:\/\/default\/navody\/levny-continuous-deployment-pro-drupal-8",
                "description": "Motivace\n\nV\u00fdvoj\u00e1\u0159 projekt\u016f na Drupalu 8 si v\u017edy \u010dasem mus\u00ed polo\u017eit klasick\u00e9 ot\u00e1zky \u201cKam s t\u00edm?\u201d,\u00a0\u201cJak to tam dostat?\u201d a \u201cJak to tam snadno aktualizovat?\u201d.\u00a0\n\nPrvn\u00ed ot\u00e1zka sm\u011b\u0159uje k nalezen\u00ed vhodn\u00e9ho hostingu. Vhodn\u00fdch hosting\u016f pro Drupal 8 je \u0159ada a nejlep\u0161\u00ed prax\u00ed je vyzkou\u0161et \u010di se zeptat. O tom tento \u010dl\u00e1nek nen\u00ed.",
                "og_url": "http:\/\/default\/drupal-cz",
                "og_title": "| Drupal.cz",
                "article_tag_0": "development",
                "article_published_time": "2018-12-09T19:52:13+0100",
                "article_modified_time": "2019-03-11T22:56:42+0100"
            }
        }
    ],
    "path": [
        {
            "alias": "\/navody\/levny-continuous-deployment-pro-drupal-8",
            "pid": 365726,
            "langcode": "cs",
            "lang": "cs"
        }
    ],
    "body": [
        {
            "value": "<h2><span>Motivace<\/span><\/h2>\r\n\r\n<p><span>V\u00fdvoj\u00e1\u0159 projekt\u016f na Drupalu 8 si v\u017edy \u010dasem mus\u00ed polo\u017eit klasick\u00e9 ot\u00e1zky<\/span><span> <\/span><span>\u201cKam<\/span><span> s t\u00edm?\u201d,<\/span><span>&nbsp;<\/span><span>\u201cJak<\/span><span> to tam dostat?\u201d a<\/span><span> <\/span><span>\u201cJak<\/span><span> to tam snadno aktualizovat?\u201d.&nbsp;<\/span><\/p>\r\n\r\n<p><span>Prvn\u00ed ot\u00e1zka sm\u011b\u0159uje k nalezen\u00ed vhodn\u00e9ho hostingu. Vhodn\u00fdch hosting\u016f pro Drupal 8 je \u0159ada a nejlep\u0161\u00ed prax\u00ed je vyzkou\u0161et \u010di se zeptat. O tom tento \u010dl\u00e1nek nen\u00ed.<\/span><\/p>\r\n\r\n<p><span>Druh\u00e1 ot\u00e1zka sm\u011b\u0159uje k nalezen\u00ed cesty, jak projekt z tepla va\u0161eho dom\u00e1c\u00edho v\u00fdvojov\u00e9ho po\u010d\u00edta\u010de dostat k n\u011bkomu ciz\u00edmu do datacentra, l\u00e9pe \u0159e\u010deno nahr\u00e1t na internet, kde ho mohou naj\u00edt potenci\u00e1ln\u00ed \u010dten\u00e1\u0159i, n\u00e1v\u0161t\u011bvn\u00edci a z\u00e1kazn\u00edci. T\u0159et\u00ed ot\u00e1zka se v\u011bnuje nalezen\u00ed co nejjednodu\u0161\u0161\u00edho zp\u016fsobu, jak tuto \u010dinnost d\u011blat opakovan\u011b. Druh\u00e9 a t\u0159et\u00ed ot\u00e1zce se v\u011bnuje tento \u010dl\u00e1nek.<\/span><\/p>\r\n\r\n<h3><span>Klasick\u00e1 cesta je trnit\u00e1<\/span><\/h3>\r\n\r\n<p><span>Drupal 8 obsahuje po z\u00e1kladn\u00ed instalaci p\u0159es 27 tis\u00edc soubor\u016f. Klasick\u00e1 cesta -&nbsp;zkop\u00edrovat tento bal\u00edk na hosting p\u0159es <\/span><span>SFTP&nbsp;nebo zastaral\u00e9 FTP -<\/span><span>&nbsp;se stala utrpen\u00edm na n\u011bkolik des\u00edtek minut. Mus\u00edte si na serveru nastavit settings.php s heslem k datab\u00e1zi a pak si hl\u00eddat, abyste si ho p\u0159\u00ed\u0161t\u011b nep\u0159ehr\u00e1li. Kdy\u017e pak n\u011bco oprav\u00edte<\/span><span> <\/span><span>(text<\/span><span>&nbsp;v modulu, barvu v CSS, zm\u011bn\u00edte logo a zm\u011bn\u00edte po\u0159ad\u00ed pol\u00ed u \u010dl\u00e1nk\u016f...), mus\u00edte naj\u00edt 3 m\u00edsta, kter\u00e1 <\/span><span>se zm\u011bnila,<\/span><span> a ta nahr\u00e1t na server na spr\u00e1vn\u00e1 m\u00edsta a nespl\u00e9st se a tu zm\u011bnu po\u0159ad\u00ed naklikat na serveru znovu...&nbsp;<\/span><\/p>\r\n\r\n<p><span>Kdy\u017e v\u00e1m \u0159eknu, \u017ee p\u0159en\u00e9st jakoukoliv zm\u011bnu Drupal projektu na internet lze poka\u017ed\u00e9 ud\u011blat jedin\u00fdm p\u0159\u00edkazem, zabere to n\u011bkolik sekund a sta\u010d\u00ed v\u00e1m k tomu hosting za t\u0159i stovky m\u011bs\u00ed\u010dn\u011b, zaj\u00edm\u00e1 v\u00e1s jak? Super. Nau\u010d\u00edm v\u00e1s to.<\/span><\/p>\r\n\r\n<h3><span>Cesta profesion\u00e1l\u016f<\/span><\/h3>\r\n\r\n<p><span>Zku\u0161en\u00ed v\u00fdvoj\u00e1\u0159i pracuj\u00ed v\u011bt\u0161inou v t\u00fdmech a pou\u017e\u00edvaj\u00ed ur\u010dit\u00fd postup pr\u00e1ce, kter\u00fdm si zaji\u0161\u0165uj\u00ed, \u017ee zm\u011bny od jednoho kolegy se dostanou na po\u010d\u00edta\u010de dal\u0161\u00edch koleg\u016f, a t\u00edm p\u00e1dem v\u0161ichni pracuj\u00ed na stejn\u00e9 verzi projektu, i kdy\u017e je vyv\u00edjen na n\u011bkolika m\u00edstech paraleln\u011b. Jde tedy o distribuci aktu\u00e1ln\u00edho stavu projektu mezi r\u016fzn\u00fdmi po\u010d\u00edta\u010di. My si m\u016f\u017eeme n\u00e1\u0161 hosting p\u0159edstavit jako dal\u0161\u00edho \u010dlena t\u00fdmu, a to plat\u00ed pro dvou\u010dlenn\u00e9 i deseti\u010dlenn\u00e9 t\u00fdmy. Mus\u00edme tedy po\u017eadovat, aby n\u00e1\u0161 hosting <\/span><span>podporoval<\/span><span> to, co m\u00e1 na po\u010d\u00edta\u010di ka\u017ed\u00fd \u010dlen profesion\u00e1ln\u00edho t\u00fdmu:<\/span><\/p>\r\n\r\n<ul>\r\n\t<li><span>SSH p\u0159\u00edstup<\/span><\/li>\r\n\t<li><span>Composer<\/span><\/li>\r\n\t<li><span>Drush<\/span><\/li>\r\n\t<li><span>Git<\/span><\/li>\r\n<\/ul>\r\n\r\n<p><span>Pokud v\u00e1\u0161 hosting tyto parametry m\u00e1, m\u016f\u017eete tuto kapitolu p\u0159esko\u010dit. V\u011bt\u0161ina levn\u00fdch hosting\u016f, kde nejste tzv. root<\/span><span> <\/span><span>(superu\u017eivatel<\/span><span> se v\u0161emi pr\u00e1vy a zodpov\u011bdnost\u00ed), tyto po\u017eadaky nespl\u0148uje. Nap\u0159. \u010cesk\u00fd hosting m\u00e1 na <\/span><span><span>VMS<\/span><\/span><span> <\/span><span>(Virtual<\/span><span> Managed Server) v\u0161echno mimo Git. SnackHost Cloudhosting m\u00e1 v\u0161echno, ale Drupal 8 mi tam b\u011b\u017e\u00ed pomalu. Hostingy, kter\u00e9 toto spl\u0148uj\u00ed, v\u00e1m v\u011bt\u0161inou pronajmou virtu\u00e1ln\u00ed po\u010d\u00edta\u010d s Linuxem a vy\u017eaduj\u00ed, abyste byli root, v\u0161e si instalovali sami a byl z v\u00e1s specialista na Linuxov\u00fd server. S t\u00edm souvis\u00ed i to, \u017ee se mus\u00edte starat o bezpe\u010dnost a aktualizovat opera\u010dn\u00ed syst\u00e9m, kdykoliv se objev\u00ed n\u011bjak\u00e1 bezpe\u010dnostn\u00ed skulina. Specializovan\u00e9 zahrani\u010dn\u00ed hostingy pro Drupal jsou super, ale ne\u00fam\u011brn\u011b drah\u00e9. Hosting, na kter\u00e9m bych nemusel b\u00fdt root a kter\u00fd by m\u011bl k dispozici v\u0161echny n\u00e1stroje pro v\u00fdvoj\u00e1\u0159e, jsem hledal dlouho a to hled\u00e1n\u00ed bylo pln\u00e9 zklam\u00e1n\u00ed. A\u017e jsem objevil slu\u017ebu, kter\u00e1 to zvl\u00e1dla a moje Drupal projekty tam svi\u0161t\u00ed k naprost\u00e9 spokojenosti za necel\u00e1&nbsp;3 kila m\u011bs\u00ed\u010dn\u011b.<\/span><\/p>\r\n\r\n<h2><span>Cloudways<\/span><\/h2>\r\n\r\n<p><span>Ne\u017e budeme pokra\u010dovat, prohla\u0161uji, \u017ee se pole\u010dnost\u00ed nem\u00e1m \u017e\u00e1dn\u00fd vztah a tento \u010dl\u00e1nek pouze reflektuje moje osobn\u00ed zku\u0161enosti a nenesu zodpov\u011bdnost v p\u0159\u00edpad\u011b, \u017ee va\u0161e zku\u0161enosti budou jin\u00e9. N\u00ed\u017ee jsou uvedeny 2 odkazy. Prvn\u00ed obsahuje affiliate identifik\u00e1tor;&nbsp;pokud na n\u011bj kliknete a j\u00e1 bych z toho n\u011bkdy m\u011bl n\u011bjak\u00fd finan\u010dn\u00ed prosp\u011bch, \u010destn\u011b prohla\u0161uji, \u017ee ho r\u00e1d a transparentn\u011b v\u011bnuji \u010desk\u00e9 Drupal asociaci na podporu \u010desk\u00e9 Drupal komunity. Druh\u00fd odkaz je bez identifik\u00e1toru a pou\u017eijte ho v p\u0159\u00edpad\u011b, \u017ee chcete m\u00edt naprostou jistotu, \u017ee ani j\u00e1 ani \u010desk\u00e1 Asociace pro Drupal z toho nic m\u00edt nebude.<\/span><\/p>\r\n\r\n<p><a href=\"https:\/\/www.cloudways.com\/en\/drupal-cloud-hosting.php?id=255492&amp;amp;a_bid=a8d5bda6\"><code><span>Cloudways - Faster Drupal Hosting<\/span><\/code><\/a><code><span> (str\u00e1nka v\u011bnovan\u00e1 hostingu pro Drupal)<\/span><\/code><\/p>\r\n\r\n<p><a href=\"https:\/\/www.cloudways.com\"><code><span>Cloudways<\/span><\/code><\/a><code><span> - hlavn\u00ed str\u00e1nka<\/span><\/code><\/p>\r\n\r\n<p><span>Klikn\u011bte a vytvo\u0159te si testovac\u00ed \u00fa\u010det zdarma. Je omezen\u00fd na 3 dny. Nejprve si zalo\u017ete server. Dejte mu jm\u00e9no, zadejte druh a n\u00e1zev aplikace. Na ka\u017ed\u00e9m serveru m\u016f\u017eete m\u00edt v\u00edce tzv. aplikac\u00ed, co\u017e jsou vlastn\u011b hostingy pro jednotliv\u00e9 dom\u00e9ny. V\u00e1\u0161 Drupal 8 projekt je tedy z hlediska Cloudways aplikac\u00ed. A\u010d m\u016f\u017eete vybrat, \u017ee chcete zalo\u017eit Drupal 8 aplikaci, doporu\u010duji v\u00e1m zakl\u00e1dat Drupal projekty jako<\/span><span> <\/span><span>\u201cPHP<\/span><span> Custom App\u201d, proto\u017ee nechcete nic p\u0159edinstalov\u00e1vat. Vyberte si, kde v\u00e1\u0161 server bude le\u017eet. Z hlediska ceny doporu\u010duji DigitalOcean s 1 GB RAM za 10 dolar\u016f m\u011bs\u00ed\u010dn\u011b a klikn\u011bte na \"Launch now\". K tomuto serveru budete p\u0159istupovat p\u0159es slu\u017ebu Cloudways, kter\u00e1 server nakonfiguruje a poskytne webov\u00e9 administra\u010dn\u00ed rozhran\u00ed. Za p\u00e1r minut je v\u0161e p\u0159ipraveno.&nbsp;<\/span><\/p>\r\n\r\n<p><span>P<\/span><span><em>ozn.: Jeliko\u017e j\u00e1 u\u017e server m\u00e1m, nev\u00edm p\u0159esn\u011b, jak jdou \u00fakony po sob\u011b, kdy\u017e se zakl\u00e1d\u00e1 nov\u00fd server, proto pros\u00edm pou\u017eijte p\u0159irozenou inteligenci a zorientujte se v ovl\u00e1d\u00e1n\u00ed Cloudways, p\u0159\u00edpadn\u011b pou\u017eijte rozs\u00e1hlou n\u00e1pov\u011bdu.<\/em><\/span><\/p>\r\n\r\n<p><img alt=\"\" src=\"https:\/\/photos-1.dropbox.com\/t\/2\/AABjA8prG_YxGH8-ul5-Lmt-Wl6NvkVcVAx2t2P5rFcnSw\/12\/83194090\/png\/2048x1\/5\/1544554800\/0\/10\/image.png\/_\/png%2520https%253A%252F%252Fd2mxuefqeaa7sj.cloudfront.net%252Fs_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543782138363_file.png?preserve_transparency=1&amp;size=2048x1&amp;size_mode=5\" \/><\/p>\r\n\r\n<p><span>P\u00e1r d\u016fle\u017eit\u00fdch m\u00edst v administraci:<\/span><\/p>\r\n\r\n<h3><span>Server management<\/span><\/h3>\r\n\r\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Master credentials<\/em><\/span><span> si nahrajte <\/span><span><span>SSH kl\u00ed\u010d<\/span><\/span><span> a pod\u00edvejte se, jakou m\u00e1te IP adresu. SSH kl\u00ed\u010d\u016f se nebojte, slo\u017eit\u011b to jen vypad\u00e1 a u\u0161et\u0159\u00ed to mnoho \u010dasu, proto\u017ee m\u00edsto zad\u00e1v\u00e1n\u00ed hesla v\u00e1s server pozn\u00e1 podle kl\u00ed\u010de. Pokud pot\u0159ebujete, pod\u00edvejte se na n\u00e1pov\u011bdu, t\u0159eba na GitHubu <\/span><span><a href=\"https:\/\/help.github.com\/articles\/connecting-to-github-with-ssh\">https:\/\/help.github.com\/articles\/connecting-to-github-with-ssh<\/a><\/span><span>. Pokud byste to z n\u011bjak\u00e9ho d\u016fvodu odm\u00edtali, je samoz\u0159ejm\u011b mo\u017enost ponechat autentizaci na klasick\u00fdch metod\u00e1ch pomoc\u00ed jm\u00e9na a hesla.<\/span><\/p>\r\n\r\n<h3><span>Aplication management<\/span><\/h3>\r\n\r\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Access detail<\/em><\/span><span> m\u00e1te p\u0159id\u011blenou testovac\u00ed URL adresu pro v\u00e1\u0161 web a m\u016f\u017eete si nastavit heslo k datab\u00e1zi.<\/span><\/p>\r\n\r\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Application Settings<\/em><\/span><span> si nastavte polo\u017eku Folder na n\u00e1zev projektu<\/span><span> <\/span><span>(d8workshop).<\/span><span> Je to n\u00e1zev adres\u00e1\u0159e a pom\u016f\u017ee v\u00e1m to v orientaci. Soubory projektu pak snadno najdete v adres\u00e1\u0159i <\/span><span><strong>~\/applications\/d8workshop\/public_html<\/strong><\/span><span>. Tuto cestu budete pot\u0159ebovat zn\u00e1t.<\/span><\/p>\r\n\r\n<p><span><span><img alt=\"\" height=\"287\" src=\"https:\/\/d2mxuefqeaa7sj.cloudfront.net\/s_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543785494473_file.png\" width=\"234\" \/><\/span><\/span><\/p>\r\n\r\n<p><span>Jakmile m\u00e1te vytvo\u0159en\u00fd hosting pro v\u00e1\u0161 projekt, m\u016f\u017eeme se kone\u010dn\u011b dostat k n\u00e1vodu na deployment.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<h2><span>Deployment - pot\u0159ebn\u00e9 znalosti a dovednosti<\/span><\/h2>\r\n\r\n<p><span>Tento \u010dl\u00e1nek p\u0159edpokl\u00e1d\u00e1, \u017ee toto m\u00e1te a zn\u00e1te:<\/span><\/p>\r\n\r\n<ul>\r\n\t<li><span>Pr\u00e1ci s Gitem - nemus\u00edte um\u011bt Git p\u0159\u00edkazy, pokud m\u00e1te grafickou aplikaci pro pr\u00e1ci s gitem. J\u00e1 budu uv\u00e1d\u011bt p\u0159\u00edkazy a vy si najd\u011bte, jak se to ve va\u0161\u00ed aplikaci d\u011bl\u00e1.<\/span><\/li>\r\n\t<li><span>Z\u00e1kladn\u00ed pr\u00e1ci s Composerem - ten n\u00e1m bude nahr\u00e1vat Drupal, moduly a z\u00e1vislosti.<\/span><\/li>\r\n\t<li><span>Drush - budu pou\u017e\u00edvat Drush p\u0159\u00edkazy, proto\u017ee je to jednodu\u0161\u0161\u00ed a proto\u017ee jsme p\u0159ece prof\u00edci, ne?<\/span><\/li>\r\n\t<li><span>Prost\u0159ed\u00ed p\u0159\u00edkazov\u00e9 \u0159\u00e1dky - budete na serveru pracovat vzd\u00e1len\u011b, tak\u017ee abyste ch\u00e1pali, co d\u011bl\u00e1te<\/span><span> <\/span><span>(cd,<\/span><span> ls, mkdir apod...)<\/span><\/li>\r\n\t<li><span>SSH kl\u00ed\u010d - p\u0159edpokl\u00e1d\u00e1m, \u017ee m\u00e1te SSH kl\u00ed\u010d, jeho\u017e ve\u0159ejnou \u010d\u00e1st jste nahr\u00e1li na server.<\/span><\/li>\r\n\t<li><span>Um\u00edte nainstalovat Drupal, ch\u00e1pete config management a dal\u0161\u00ed z\u00e1kladn\u00ed v\u011bci, kter\u00e9 byly nap\u0159. p\u0159edm\u011btem workshopu Radima Kla\u0161ky, kter\u00fd m\u016f\u017eete naj\u00edt na <\/span><span><a href=\"https:\/\/github.com\/Drupalcz\/workshop\">https:\/\/github.com\/Drupalcz\/workshop<\/a><\/span><span> a v README.md je n\u00e1vod, jak nainstalovat Drupal projekt. V tomto n\u00e1vodu budeme s projektem z tohoto repozit\u00e1\u0159e pracovat. Av\u0161ak m\u016f\u017eete pracovat i se sv\u00fdm vlastn\u00edm \u010di jin\u00fdm existuj\u00edc\u00edm projektem.<\/span><\/li>\r\n\t<li><span>M\u00e1te na sv\u00e9m po\u010d\u00edta\u010di rozb\u011bhnut\u00fd projekt z v\u00fd\u0161e uveden\u00e9ho bodu.<\/span><\/li>\r\n<\/ul>\r\n\r\n<h2><span>Jak na to<\/span><\/h2>\r\n\r\n<p><span>Na\u0161\u00edm c\u00edlem je vytvo\u0159it si na Cloudways serveru vzd\u00e1len\u00fd git repozit\u00e1\u0159 a nakonfigurovat ho tak, aby jakmile p\u0159ijme n\u011bjak\u00e9 zm\u011bny, p\u0159enesl automaticky tyto zm\u011bny do prostoru webhostingu a provedl instala\u010dn\u00ed p\u0159\u00edkazy.<\/span><\/p>\r\n\r\n<h3><span>SSH p\u0159ipojen\u00ed<\/span><\/h3>\r\n\r\n<p><span>Nejprve si nakonfigurujeme SSH spojen\u00ed, abychom nemuseli zad\u00e1vat heslo a nic n\u00e1s nezdr\u017eovalo. Najd\u011bte v dom\u00e1c\u00edm adres\u00e1\u0159i soubor <\/span><span><em>.ssh\/config<\/em><\/span><span> a vlo\u017ete do n\u011bj<\/span><\/p>\r\n\r\n<p><code><span>Host <\/span><span><span>cloudways<\/span><\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; Hostname <\/span><span><strong>ip_va\u0161eho_serveru<\/strong><\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; User <\/span><span><strong>master_login_username<\/strong><\/span><\/code><\/p>\r\n\r\n<p><span>N\u00e1zev serveru si vymyslete&nbsp;podle pot\u0159eby, j\u00e1 jsem pou\u017eil<\/span><span> <\/span><span>\u201ccloudways\u201d.<\/span><span> U\u017eivatelsk\u00e9 jm\u00e9no a IP adresu &nbsp;najdete v z\u00e1lo\u017ece <em>Server management<\/em> - <em>Master credentials<\/em>. Ulo\u017ete&nbsp;a pak napi\u0161te do termin\u00e1lu:<\/span><\/p>\r\n\r\n<p><code><span>ssh cloudways<\/span><\/code><\/p>\r\n\r\n<p><span>...a m\u011bli byste tam b\u00fdt.<\/span><\/p>\r\n\r\n<h2><span>Vzd\u00e1len\u00fd git repozit\u00e1\u0159<\/span><\/h2>\r\n\r\n<p><span>Nyn\u00ed vytvo\u0159\u00edme vzd\u00e1len\u00fd git repozit\u00e1\u0159 v adres\u00e1\u0159i <\/span><span><strong>git_repos<\/strong><\/span><span>. Je dobr\u00fdm zvykem pojmenov\u00e1vat repozit\u00e1\u0159e s p\u0159\u00edponou .git. Git repozit\u00e1\u0159 je technicky vzato adres\u00e1\u0159, tak\u017ee ten v na\u0161em n\u00e1vodu pojmenujeme <\/span><span><strong>d8workshop.git<\/strong><\/span><span>. Tento repozit\u00e1\u0159 bude p\u0159ij\u00edmat na\u0161e zm\u011bny jako pomysln\u00fd<\/span><span> <\/span><span>\u201cdal\u0161\u00ed<\/span><span> \u010dlen na\u0161eho t\u00fdmu\u201d. Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\r\n\r\n<p><code><span>mkdir git_repos<\/span><\/code><\/p>\r\n\r\n<p><code><span>cd git_repos<\/span><\/code><\/p>\r\n\r\n<p><code><span>mkdir d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><code><span>cd d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><code><span>git init --bare<\/span><\/code><\/p>\r\n\r\n<p><span>Posledn\u00edm p\u0159\u00edkazem jsme vytvo\u0159ili strukturu pr\u00e1zdn\u00e9ho <\/span><span>git<\/span><span> repozit\u00e1\u0159e a m\u011bli bychom vid\u011bt zpr\u00e1vu:<\/span><\/p>\r\n\r\n<p><code><span>Initialized empty Git repository in \/home\/master\/git_repos\/d8workshop.git\/<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<h2><span>Vytvo\u0159en\u00ed sluhy<\/span><\/h2>\r\n\r\n<p><span>Vytvo\u0159\u00edme si v adres\u00e1\u0159i <\/span><span><strong>hooks<\/strong><\/span><span> v\u011brn\u00e9ho sluhu. Ten nikdy nesp\u00ed a \u010dek\u00e1, a\u017e se v repozit\u00e1\u0159i n\u011bco nov\u00e9ho objev\u00ed. Jakmile zahl\u00e9dne zm\u011bnu, v\u0161echny soubory v repozit\u00e1\u0159i vykop\u00edruje na n\u00e1\u0161 hosting, co\u017e je technicky jen jin\u00fd adres\u00e1\u0159, a provede s\u00e9rii p\u0159\u00edkaz\u016f k instalaci zm\u011bn do na\u0161eho Drupal projektu. Nejprve si vzpome\u0148te, \u017ee adres\u00e1\u0159 s aplikac\u00ed<\/span><span> <\/span><span>(hostingem)<\/span><span> je <\/span><span><strong>~\/applications\/d8workshop\/public_html<\/strong><\/span><span>.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>Vytvo\u0159en\u00ed nov\u00e9ho souboru post-receive. Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\r\n\r\n<p><code><span>cd hooks<\/span><\/code><\/p>\r\n\r\n<p><code><span>nano post-receive<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>Do otev\u0159en\u00e9ho editoru vlo\u017ete:<\/span><\/p>\r\n\r\n<p><code><span>#!\/bin\/bash<\/span><\/code><\/p>\r\n\r\n<p><code><span>GIT_DIR=\"\/home\/master\/git_repos\/d8workshop.git\"<\/span><\/code><\/p>\r\n\r\n<p><code><span>TARGET=\"\/home\/master\/applications\/d8workshop\/public_html\"<\/span><\/code><\/p>\r\n\r\n<p><code><span>BRANCH=\"master\"<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><code><span>while read oldrev newrev ref<\/span><\/code><\/p>\r\n\r\n<p><code><span>do<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; # only checking out the specified branch you would like to deploy<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; if [[ $ref = refs\/heads\/$BRANCH ]];<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; then<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo \"Ref $ref received. Deploying ${BRANCH} branch to ${TARGET}...\"<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; git --git-dir=$GIT_DIR --work-tree=$TARGET checkout&nbsp;${BRANCH} -f<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; # You will place more commands HERE...<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo \"Finished.\"<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; else<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; echo \"Ref $ref received. Only the ${BRANCH} branch may be deployed on this server.\"<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; fi<\/span><\/code><\/p>\r\n\r\n<p><code><span>done<\/span><\/code><\/p>\r\n\r\n<p><span>Ulo\u017ete a zav\u0159ete<\/span><span> <\/span><span>(Ctrl+O,<\/span><span> Enter, Ctrl-X). N\u00e1\u0161 sluha \u010dek\u00e1, zda byla p\u0159ijata zm\u011bna ve v\u011btvi<\/span><span> <\/span><span>(branch)<\/span><span> <\/span><span>\u201cmaster\u201d.<\/span><span> Pokud ano, vykop\u00edruje v\u0161echny soubory do adres\u00e1\u0159e TARGET a pomoc\u00ed parametru<\/span><span> <\/span><span>-f<\/span><span> p\u0159ep\u00ed\u0161e v\u0161e ji\u017e existuj\u00edc\u00ed. Zat\u00edm nep\u0159id\u00e1v\u00e1me \u017e\u00e1dn\u00e9 instala\u010dn\u00ed p\u0159\u00edkazy. Aby sluha o\u017eil, mus\u00edme ho ozna\u010dit jako spustiteln\u00fd soubor.<\/span><\/p>\r\n\r\n<p><code><span>chmod +x post-receive<\/span><\/code><\/p>\r\n\r\n<h2><span>Propojen\u00ed projektu se vzd\u00e1len\u00fdm repozit\u00e1\u0159em<\/span><\/h2>\r\n\r\n<p><span>N\u00e1\u0161 workshopov\u00fd projekt m\u00e1 sv\u016fj repozit\u00e1\u0159 na Githubu, odkud jsme ho z\u00edskali p\u0159\u00edkazem \"git clone\", ale t\u00edm tak\u00e9 vznikl lok\u00e1ln\u00ed git repozit\u00e1\u0159 p\u0159\u00edmo v adres\u00e1\u0159i projektu, pojmenovan\u00fd jako<\/span><span> <\/span><span>\u201c.git\u201d.<\/span><span> Na na\u0161em serveru m\u00e1me t\u0159et\u00ed repozit\u00e1\u0159. Ka\u017ed\u00fd z t\u011bchto repozit\u00e1\u0159\u016f ukazuje v praxi z\u00e1kladn\u00ed vlastnost gitu, co\u017e je decentralizovanost repozit\u00e1\u0159\u016f, a ka\u017ed\u00fd repozit\u00e1\u0159 p\u0159edstavuje geograficky odd\u011blenou z\u00e1lohu na\u0161eho projektu, co\u017e je dobr\u00fd bonus. Nyn\u00ed propoj\u00edme lok\u00e1ln\u00ed repozit\u00e1\u0159 s t\u00edm vzd\u00e1len\u00fdm na na\u0161em serveru. N\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz informuje lok\u00e1ln\u00ed repozit\u00e1\u0159, \u017ee p\u0159id\u00e1v\u00e1me &nbsp;jeden nov\u00fd vzd\u00e1len\u00fd.<\/span><\/p>\r\n\r\n<p><code><span>git remote add cloudways <\/span><span>master<\/span><span>_xxx@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><span>Prvn\u00ed v\u00fdskyt slova<\/span><span> <\/span><span>\u201ccloudways\u201d<\/span><span> je n\u00e1zev vzd\u00e1len\u00e9ho <\/span><span>repozit\u00e1\u0159e<\/span><span>. M\u016f\u017eete si tam d\u00e1t co chcete, t\u0159eba i<\/span><span> <\/span><span>\u201csluha\u201d.<\/span><span> Slovo<\/span><span> <\/span><span>\u201c<\/span><span>master<\/span><span>_xxx@cloudways\u201d<\/span><span> znamen\u00e1, \u017ee se p\u0159ipojujete jako u\u017eivatel <\/span><span><em>master<\/em><\/span><span><em>_xxx<\/em><\/span><span> na server <\/span><span><em>cloudways<\/em><\/span><span>, co\u017e je ozna\u010den\u00ed serveru, kter\u00fd jste definovali v souboru <\/span><span><em>.ssh\/config<\/em><\/span><span>. Text<\/span><span> <\/span><span>\u201c\/home\/master\/git_repos\/d8workshop.git\u201d<\/span><span> je cesta k repozit\u00e1\u0159i na vzd\u00e1len\u00e9m serveru. P\u0159\u00edkaz<\/span><span> <\/span><span>\u201cgit<\/span><span> remote add\u201d nekontroluje, zda je vzd\u00e1len\u00fd repozit\u00e1\u0159 dosa\u017eiteln\u00fd, tak\u017ee&nbsp;pokud jste ud\u011blali n\u011bjakou chybu, nedozv\u00edte se to. Proto pou\u017eijte p\u0159\u00edkaz:<\/span><\/p>\r\n\r\n<p><code><span>git remote show cloudways<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><code><span>* remote cloudways<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; Fetch URL: master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; Push &nbsp;URL: master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; HEAD branch: (unknown)<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>pro na\u010dten\u00ed vzd\u00e1len\u00e9ho repozit\u00e1\u0159e. Pokud se neobjev\u00ed chyby, m\u016f\u017eete&nbsp;zkusit poslat projekt na server. P\u0159\u00edkaz m\u00e1 podobu<\/span><\/p>\r\n\r\n<p><code><span>git push remote_repo_name branch_name<\/span><\/code><\/p>\r\n\r\n<p><span>a umo\u017e\u0148uje v\u00e1m pos\u00edlat na server jakoukoliv v\u00fdvojovou v\u011btev. Av\u0161ak pouze posl\u00e1n\u00ed v\u011btve<\/span><span> <\/span><span>\u201cmaster\u201d<\/span><span> spust\u00ed kop\u00edrov\u00e1n\u00ed soubor\u016f do prostoru webu.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><code><span>git push cloudways master&nbsp;<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><code><span>Total 0 (delta 0), reused 0 (delta 0)<\/span><\/code><\/p>\r\n\r\n<p><code><span>remote: Ref refs\/heads\/master received. Deploying master branch to \/home\/master\/applications\/d8workshop\/public_html...<\/span><\/code><\/p>\r\n\r\n<p><code><span>remote: Finished.<\/span><\/code><\/p>\r\n\r\n<p><code><span>To master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp;* [new branch] &nbsp; &nbsp; &nbsp;master -&gt; master<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>Zkontrolujeme to na serveru p\u0159es SSH.<\/span><\/p>\r\n\r\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\r\n\r\n<p><code><span>cd ~\/applications\/d8workshop\/public_html\/<\/span><\/code><\/p>\r\n\r\n<p><code><span>ls<\/span><\/code><\/p>\r\n\r\n<p><span>Vid\u00edme, \u017ee se zde objevily soubory na\u0161eho projektu a tak\u00e9 se zde objevily adres\u00e1\u0159e, zejm\u00e9na adres\u00e1\u0159 web, kter\u00fd by m\u011bl b\u00fdt hlavn\u00edm adres\u00e1\u0159em webu, tzv. Webroot. Jd\u011bte do administrace Cloudways a zm\u011b\u0148te ho z <\/span><span><em>public_html<\/em><\/span><span> na <\/span><span><em>public_html\/web<\/em><\/span><span>. Tuto zm\u011bna lze ud\u011blat a\u017e v okam\u017eiku, kdy adres\u00e1\u0159 existuje, proto jsme ji nemohli&nbsp;ud\u011blat d\u0159\u00edve.<\/span><\/p>\r\n\r\n<p><img alt=\"\" src=\"https:\/\/photos-4.dropbox.com\/t\/2\/AADXphIze7ceIYE9oIHACnUOrnlGK1jjKbmo65UTtOFI1Q\/12\/83194090\/png\/2048x1\/5\/1544554800\/0\/10\/image.png\/_\/png%2520https%253A%252F%252Fd2mxuefqeaa7sj.cloudfront.net%252Fs_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543789626101_file.png?preserve_transparency=1&amp;size=2048x1&amp;size_mode=5\" \/><\/p>\r\n\r\n<h2><span>Nastaven\u00ed Drupalu<\/span><\/h2>\r\n\r\n<p><span>Drupal pot\u0159ebuje zn\u00e1t p\u0159\u00edstupy k datab\u00e1zi. Jsou r\u016fzn\u00e9 praxe, kam tyto \u00fadaje zadat;&nbsp;nej\u010dast\u011bji to b\u00fdv\u00e1 do settings.php v adres\u00e1\u0159i web\/sites\/default. V na\u0161em p\u0159\u00edpad\u011b lektor Radim, kter\u00fd p\u0159ipravil projekt pro workshop, nechal soubor settings.php p\u0159en\u00e1\u0161et p\u0159es git bez \u00fadaj\u016f k datab\u00e1zi a tyto \u00fadaje se o\u010dek\u00e1vaj\u00ed v souboru settings.local.php, co\u017e je soubor na\u010d\u00edtan\u00fd ze settings.php p\u0159es include. Vzor pro tento soubor se tak\u00e9 p\u0159enesl p\u0159es git jako default.settings.local.php, ale my z n\u011bj vyu\u017eijeme jen malou \u010d\u00e1st, proto&nbsp;si ho vytvo\u0159\u00edme \u010dist\u00fd a vlo\u017e\u00edme do n\u011bj pouze p\u0159\u00edstupy k datab\u00e1zi.<\/span><\/p>\r\n\r\n<p><span>Soubor otev\u0159ete v editoru a zm\u011b\u0148te \u00fadaje k datab\u00e1zi<\/span><span> <\/span><span>(database,<\/span><span> username, password) podle \u00fadaj\u016f z Aplication management v z\u00e1lo\u017ece <\/span><span><em>Access detail.<\/em><\/span><\/p>\r\n\r\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\r\n\r\n<p><code><span>nano web\/sites\/default\/settings.local.php<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><code><span>&lt;?php<\/span><\/code><\/p>\r\n\r\n<p><code><span>$databases = array(<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; 'default' =&gt;<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; array(<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; 'default' =&gt;<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; array(<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'database' =&gt; 'xxxxxx',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'username' =&gt; 'xxxxxx',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'password' =&gt; 'supertajneheslo',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'host' =&gt; 'localhost',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'port' =&gt; <\/span><span><span>'3306'<\/span><\/span><span>,<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'driver' =&gt; 'mysql',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 'prefix' =&gt; '',<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; &nbsp; &nbsp; ),<\/span><\/code><\/p>\r\n\r\n<p><code><span>&nbsp; &nbsp; ),<\/span><\/code><\/p>\r\n\r\n<p><code><span>);<\/span><\/code><\/p>\r\n\r\n<p><span>Ulo\u017eit, zav\u0159\u00edt.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<h2><span>Prvn\u00ed instalace - zat\u00edm ru\u010dn\u00ed<\/span><\/h2>\r\n\r\n<p><span>Prvn\u00ed instalaci mus\u00edme ud\u011blat v p\u0159\u00edkazov\u00e9 \u0159\u00e1dce ru\u010dn\u011b. Jsme st\u00e1le v adres\u00e1\u0159i \/home\/master\/applications\/d8workshop\/public_html (pokud ne, tak se tam vr\u00e1t\u00edme).<\/span><\/p>\r\n\r\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\r\n\r\n<p><code><span>cd \/home\/master\/applications\/d8workshop\/public_html<\/span><\/code><\/p>\r\n\r\n<p><code><span>composer install --no-dev<\/span><\/code><\/p>\r\n\r\n<p><span>Tento p\u0159\u00edkaz st\u00e1hne v\u0161echen pot\u0159ebn\u00fd software, kter\u00fd Drupal pot\u0159ebuje. Parametr<\/span><span> <\/span><span>\u2014no-dev<\/span><span> nebude instalovat moduly ze sekce dev, proto\u017ee na stage \u010di produk\u010dn\u00edm serveru je v\u011bt\u0161inou nepot\u0159ebujeme. D\u00e1le nainstalujeme Drupal v\u010detn\u011b existuj\u00edc\u00ed vyexportovan\u00e9 konfigurace.<\/span><\/p>\r\n\r\n<p><code><span><span>drush<\/span><\/span><span> si minimal --existing-config -y<\/span><\/code><\/p>\r\n\r\n<p><span>Zb\u00fdva zm\u011bnit heslo pro admina.<\/span><\/p>\r\n\r\n<p><code><span>drush upwd admin mojesupertajnehoslo<\/span><\/code><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>A je \u010das se pod\u00edvat na web. URL najdete v Aplication management v z\u00e1lo\u017ece <\/span><span><em>Access detail<\/em><\/span><span> a vypad\u00e1 n\u011bjak takto: <\/span><span><a href=\"http:\/\/phpstack-cislo-cislo.cloudwaysapps.com\/\">http:\/\/phpstack-cislo-cislo.cloudwaysapps.com\/<\/a><\/span><span>.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>Gratuluji. M\u00e1te web na serveru, dokonce nakonfigurovan\u00fd. Dal\u0161\u00ed zm\u011bna u\u017e bude automatick\u00e1.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<h2><span>Dopln\u011bn\u00ed p\u0159\u00edkaz\u016f pro sluhu<\/span><\/h2>\r\n\r\n<p><span><span>Na vzd\u00e1len\u00e9m serveru<\/span><\/span><span>:<\/span><\/p>\r\n\r\n<p><code><span>nano ~\/git_repos\/d8workshop.git\/hooks\/post-receive<\/span><\/code><\/p>\r\n\r\n<p><span>a dopl\u0148te p\u0159\u00edkazy pro instalaci zm\u011bn mezi \u0159\u00e1dky git a echo:<\/span><\/p>\r\n\r\n<p><code><span>git --git-dir=$GIT_DIR --work-tree=$TARGET checkout&nbsp;${BRANCH} -f<\/span><\/code><\/p>\r\n\r\n<p><code><span>cd ${TARGET}<\/span><\/code><\/p>\r\n\r\n<p><code><span>composer install --no-dev<\/span><\/code><\/p>\r\n\r\n<p><code><span>cd ${TARGET}\/web<\/span><\/code><\/p>\r\n\r\n<p><code><span>drush cr<\/span><\/code><\/p>\r\n\r\n<p><code><span>drush entup -y<\/span><\/code><\/p>\r\n\r\n<p><code><span>drush updb -y<\/span><\/code><\/p>\r\n\r\n<p><code><span>drush cim -y<\/span><\/code><\/p>\r\n\r\n<p><code><span>drush cr<\/span><\/code><\/p>\r\n\r\n<p><code><span>echo \"Finished.\"<\/span><\/code><\/p>\r\n\r\n<p><span>Pozn\u00e1mka pro experiment\u00e1tory: Pro zjednodu\u0161en\u00ed tohoto n\u00e1vodu jsem zvolil toto p\u0159\u00edmo\u010dar\u00e9 \u0159e\u0161en\u00ed. P\u0159\u00edkazy od \u0159\u00e1dky 2 v\u0161ak m\u016f\u017eete&nbsp;um\u00edstit i do extern\u00edho scriptu uvnit\u0159 repozit\u00e1\u0159e, \u010d\u00edm\u017e z\u00edsk\u00e1te mo\u017enost m\u011bnit tyto p\u0159\u00edkazy lok\u00e1ln\u011b a pos\u00edlat je na server spole\u010dn\u011b s ostatn\u00edmi zm\u011bnami p\u0159es Git. Oboha\u0165te \u010dten\u00e1\u0159e va\u0161\u00edm vylep\u0161en\u00fdm scriptem v koment\u00e1\u0159i.<\/span><\/p>\r\n\r\n<h2><span>P\u0159enesen\u00ed zm\u011bny na server<\/span><\/h2>\r\n\r\n<p><span>Ud\u011blejte<\/span><span> zm\u011bnu na lok\u00e1ln\u00edm projektu, nap\u0159. zm\u011b\u0148te n\u00e1zev webu na str\u00e1nce<\/span><\/p>\r\n\r\n<p><span>\/admin\/config\/system\/site-information.<\/span><\/p>\r\n\r\n<p><span>Vyexportujte configuraci.<\/span><\/p>\r\n\r\n<p><code><span>drush cex<\/span><\/code><\/p>\r\n\r\n<p><span>Ozna\u010dte zm\u011bn\u011bn\u00e9 soubory a zapi\u0161te zm\u011bny do m\u00edstn\u00edho repozit\u00e1\u0159e<\/span><span> <\/span><span>(commit).<\/span><\/p>\r\n\r\n<p><code><span>git add .<\/span><\/code><\/p>\r\n\r\n<p><code><span>git commit -m \"Update site name\"<\/span><\/code><\/p>\r\n\r\n<p><span>Nakonec zm\u011bny po\u0161lete na v\u00e1\u0161 Cloudways server.<\/span><\/p>\r\n\r\n<p><code><span>git push cloudways master<\/span><\/code><\/p>\r\n\r\n<p><span>Sledujte zpr\u00e1vy v consoli a a\u017e uvid\u00edte<\/span><span> <\/span><span>\u201cFinished\u201d,<\/span><span> na\u010dt\u011bte znovu str\u00e1nku projektu na serveru. Uvid\u00edte, \u017ee v\u0161echny zm\u011bny jsou provedeny a n\u00e1zev webu byl p\u0159ejmenov\u00e1n.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>M\u016f\u017eete si pogratulovat. M\u00e1te rychl\u00fd a bezstarostn\u00fd deployment zm\u011bn na server za cenu pod t\u0159i stovky.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<h2><span>Z\u00e1v\u011br<\/span><\/h2>\r\n\r\n<p><span>T\u00edmto zp\u016fsobem p\u0159en\u00e1\u0161\u00edte ve\u0161ker\u00e9 zm\u011bny, kter\u00e9 jsou obsa\u017eeny v k\u00f3du, tedy zm\u011bny va\u0161ich custom modul\u016f, va\u0161ich t\u00e9mat vzhledu, CSS, sta\u017een\u00e9 contrib moduly, z\u00e1vislosti a ve\u0161kerou konfiguraci. Pokud pot\u0159ebujete p\u0159en\u00e9st i n\u011bjak\u00fd z\u00e1kladn\u00ed obsah, jako nap\u0159\u00edklad obsah blok\u016f, nebo testovac\u00ed \u010dl\u00e1nek v blogu, pou\u017eijte modul <\/span><span><a href=\"https:\/\/www.drupal.org\/project\/default_content_deploy\">Default Content Deploy<\/a><\/span><span>, kter\u00fd p\u0159en\u00e1\u0161\u00ed obsah do k\u00f3du a zp\u011bt. Modul obsahuje pom\u011brn\u011b podrobnou dokumentaci.<\/span><\/p>\r\n\r\n<h3><span>V\u00fdhody<\/span><\/h3>\r\n\r\n<p><span>Toto \u0159e\u0161en\u00ed p\u0159esunu zm\u011bn na server m\u00e1 n\u011bkolik dal\u0161\u00edch skryt\u00fdch v\u00fdhod. Do prostoru webrootu se nenahr\u00e1v\u00e1 adres\u00e1\u0159 .git, co\u017e by bylo bezpe\u010dnostn\u00ed riziko (\u0159ada n\u00e1vod\u016f pou\u017e\u00edvaj\u00edc\u00ed opa\u010dn\u00fd princip<\/span><span> <\/span><span>\u201cgit<\/span><span> pull\u201d mus\u00ed adres\u00e1\u0159 .git mazat ru\u010dn\u011b, nebo to ignoruje). D\u00e1le, pokud nechcete, nepot\u0159ebujete \u017e\u00e1dn\u00fd dal\u0161\u00ed repozit\u00e1\u0159, nap\u0159. na GitHubu, GitLabu, Bitbucketu apod. a sta\u010d\u00ed v\u00e1m pouze jeden pro deployment na serveru.<\/span><\/p>\r\n\r\n<h3><span><span>Probl\u00e9my<\/span><\/span><\/h3>\r\n\r\n<p><span>Repozit\u00e1\u0159 Workshop projektu obsahuje <\/span><span><em>settings.php<\/em><\/span><span> a ten se tedy p\u0159en\u00e1\u0161\u00ed p\u0159i zm\u011bn\u011b do adres\u00e1\u0159e webu. Drupal ale tento soubor blokuje a m\u011bn\u00ed mu atributy tak, aby ne\u0161el editovat. Proto bude git p\u0159i deploymentu vypisovat chybu:<\/span><\/p>\r\n\r\n<p><code><span>&nbsp;error: unable to unlink old 'web\/sites\/default\/settings.php' (Permission denied)<\/span><\/code><\/p>\r\n\r\n<p><span>Nen\u00ed to z\u00e1sadn\u00ed probl\u00e9m, ale po\u010d\u00edtejte s t\u00edm a ve va\u0161ich vlastn\u00edch projektech nechte tento soubor mezi ignorovan\u00fdmi.<\/span><\/p>\r\n\r\n<h3>Prostor pro \u010dten\u00e1\u0159e<\/h3>\r\n\r\n<p><span>Tento n\u00e1vod shrnuje ur\u010ditou osobn\u00ed praxi, kter\u00e1 rozhodn\u011b nemus\u00ed b\u00fdt nejlep\u0161\u00ed a vyhovuj\u00edc\u00ed v\u017edy a v\u0161em. Nap\u0159. post-receive hook\u016f pro deployment je cel\u00e1 \u0159ada a budu se t\u011b\u0161it na va\u0161e n\u00e1vrhy na vylep\u0161en\u00ed a zku\u0161enosti v koment\u00e1\u0159\u00edch. Tak\u00e9 bych byl r\u00e1d, pokud by se poda\u0159ilo z\u00edskat informace o dal\u0161\u00edch vyhovuj\u00edc\u00edch hostingov\u00fdch slu\u017eb\u00e1ch, jako je Cloudways. Nezapome\u0148te, \u017ee bohatstv\u00ed v\u011bdomost\u00ed Drupal komunity spo\u010d\u00edv\u00e1 ve vz\u00e1jemn\u00e9m sd\u00edlen\u00ed.<\/span><\/p>\r\n\r\n<p>&nbsp;<\/p>\r\n\r\n<p><span>Za technick\u00e9 a jazykov\u00e9 korektury tohoto \u010dl\u00e1nku d\u011bkuji Jakubu Hnili\u010dkovi, Radimu Kla\u0161kovi a Ev\u011b R\u00e1zgov\u00e9.<\/span><\/p>\r\n",
            "format": "basic_html",
            "processed": "<h2><span>Motivace<\/span><\/h2>\n\n<p><span>V\u00fdvoj\u00e1\u0159 projekt\u016f na Drupalu 8 si v\u017edy \u010dasem mus\u00ed polo\u017eit klasick\u00e9 ot\u00e1zky<\/span><span> <\/span><span>\u201cKam<\/span><span> s t\u00edm?\u201d,<\/span><span>\u00a0<\/span><span>\u201cJak<\/span><span> to tam dostat?\u201d a<\/span><span> <\/span><span>\u201cJak<\/span><span> to tam snadno aktualizovat?\u201d.\u00a0<\/span><\/p>\n\n<p><span>Prvn\u00ed ot\u00e1zka sm\u011b\u0159uje k nalezen\u00ed vhodn\u00e9ho hostingu. Vhodn\u00fdch hosting\u016f pro Drupal 8 je \u0159ada a nejlep\u0161\u00ed prax\u00ed je vyzkou\u0161et \u010di se zeptat. O tom tento \u010dl\u00e1nek nen\u00ed.<\/span><\/p>\n\n<p><span>Druh\u00e1 ot\u00e1zka sm\u011b\u0159uje k nalezen\u00ed cesty, jak projekt z tepla va\u0161eho dom\u00e1c\u00edho v\u00fdvojov\u00e9ho po\u010d\u00edta\u010de dostat k n\u011bkomu ciz\u00edmu do datacentra, l\u00e9pe \u0159e\u010deno nahr\u00e1t na internet, kde ho mohou naj\u00edt potenci\u00e1ln\u00ed \u010dten\u00e1\u0159i, n\u00e1v\u0161t\u011bvn\u00edci a z\u00e1kazn\u00edci. T\u0159et\u00ed ot\u00e1zka se v\u011bnuje nalezen\u00ed co nejjednodu\u0161\u0161\u00edho zp\u016fsobu, jak tuto \u010dinnost d\u011blat opakovan\u011b. Druh\u00e9 a t\u0159et\u00ed ot\u00e1zce se v\u011bnuje tento \u010dl\u00e1nek.<\/span><\/p>\n\n<h3><span>Klasick\u00e1 cesta je trnit\u00e1<\/span><\/h3>\n\n<p><span>Drupal 8 obsahuje po z\u00e1kladn\u00ed instalaci p\u0159es 27 tis\u00edc soubor\u016f. Klasick\u00e1 cesta -\u00a0zkop\u00edrovat tento bal\u00edk na hosting p\u0159es <\/span><span>SFTP\u00a0nebo zastaral\u00e9 FTP -<\/span><span>\u00a0se stala utrpen\u00edm na n\u011bkolik des\u00edtek minut. Mus\u00edte si na serveru nastavit settings.php s heslem k datab\u00e1zi a pak si hl\u00eddat, abyste si ho p\u0159\u00ed\u0161t\u011b nep\u0159ehr\u00e1li. Kdy\u017e pak n\u011bco oprav\u00edte<\/span><span> <\/span><span>(text<\/span><span>\u00a0v modulu, barvu v CSS, zm\u011bn\u00edte logo a zm\u011bn\u00edte po\u0159ad\u00ed pol\u00ed u \u010dl\u00e1nk\u016f...), mus\u00edte naj\u00edt 3 m\u00edsta, kter\u00e1 <\/span><span>se zm\u011bnila,<\/span><span> a ta nahr\u00e1t na server na spr\u00e1vn\u00e1 m\u00edsta a nespl\u00e9st se a tu zm\u011bnu po\u0159ad\u00ed naklikat na serveru znovu...\u00a0<\/span><\/p>\n\n<p><span>Kdy\u017e v\u00e1m \u0159eknu, \u017ee p\u0159en\u00e9st jakoukoliv zm\u011bnu Drupal projektu na internet lze poka\u017ed\u00e9 ud\u011blat jedin\u00fdm p\u0159\u00edkazem, zabere to n\u011bkolik sekund a sta\u010d\u00ed v\u00e1m k tomu hosting za t\u0159i stovky m\u011bs\u00ed\u010dn\u011b, zaj\u00edm\u00e1 v\u00e1s jak? Super. Nau\u010d\u00edm v\u00e1s to.<\/span><\/p>\n\n<h3><span>Cesta profesion\u00e1l\u016f<\/span><\/h3>\n\n<p><span>Zku\u0161en\u00ed v\u00fdvoj\u00e1\u0159i pracuj\u00ed v\u011bt\u0161inou v t\u00fdmech a pou\u017e\u00edvaj\u00ed ur\u010dit\u00fd postup pr\u00e1ce, kter\u00fdm si zaji\u0161\u0165uj\u00ed, \u017ee zm\u011bny od jednoho kolegy se dostanou na po\u010d\u00edta\u010de dal\u0161\u00edch koleg\u016f, a t\u00edm p\u00e1dem v\u0161ichni pracuj\u00ed na stejn\u00e9 verzi projektu, i kdy\u017e je vyv\u00edjen na n\u011bkolika m\u00edstech paraleln\u011b. Jde tedy o distribuci aktu\u00e1ln\u00edho stavu projektu mezi r\u016fzn\u00fdmi po\u010d\u00edta\u010di. My si m\u016f\u017eeme n\u00e1\u0161 hosting p\u0159edstavit jako dal\u0161\u00edho \u010dlena t\u00fdmu, a to plat\u00ed pro dvou\u010dlenn\u00e9 i deseti\u010dlenn\u00e9 t\u00fdmy. Mus\u00edme tedy po\u017eadovat, aby n\u00e1\u0161 hosting <\/span><span>podporoval<\/span><span> to, co m\u00e1 na po\u010d\u00edta\u010di ka\u017ed\u00fd \u010dlen profesion\u00e1ln\u00edho t\u00fdmu:<\/span><\/p>\n\n<ul><li><span>SSH p\u0159\u00edstup<\/span><\/li>\n\t<li><span>Composer<\/span><\/li>\n\t<li><span>Drush<\/span><\/li>\n\t<li><span>Git<\/span><\/li>\n<\/ul><p><span>Pokud v\u00e1\u0161 hosting tyto parametry m\u00e1, m\u016f\u017eete tuto kapitolu p\u0159esko\u010dit. V\u011bt\u0161ina levn\u00fdch hosting\u016f, kde nejste tzv. root<\/span><span> <\/span><span>(superu\u017eivatel<\/span><span> se v\u0161emi pr\u00e1vy a zodpov\u011bdnost\u00ed), tyto po\u017eadaky nespl\u0148uje. Nap\u0159. \u010cesk\u00fd hosting m\u00e1 na <\/span><span><span>VMS<\/span><\/span><span> <\/span><span>(Virtual<\/span><span> Managed Server) v\u0161echno mimo Git. SnackHost Cloudhosting m\u00e1 v\u0161echno, ale Drupal 8 mi tam b\u011b\u017e\u00ed pomalu. Hostingy, kter\u00e9 toto spl\u0148uj\u00ed, v\u00e1m v\u011bt\u0161inou pronajmou virtu\u00e1ln\u00ed po\u010d\u00edta\u010d s Linuxem a vy\u017eaduj\u00ed, abyste byli root, v\u0161e si instalovali sami a byl z v\u00e1s specialista na Linuxov\u00fd server. S t\u00edm souvis\u00ed i to, \u017ee se mus\u00edte starat o bezpe\u010dnost a aktualizovat opera\u010dn\u00ed syst\u00e9m, kdykoliv se objev\u00ed n\u011bjak\u00e1 bezpe\u010dnostn\u00ed skulina. Specializovan\u00e9 zahrani\u010dn\u00ed hostingy pro Drupal jsou super, ale ne\u00fam\u011brn\u011b drah\u00e9. Hosting, na kter\u00e9m bych nemusel b\u00fdt root a kter\u00fd by m\u011bl k dispozici v\u0161echny n\u00e1stroje pro v\u00fdvoj\u00e1\u0159e, jsem hledal dlouho a to hled\u00e1n\u00ed bylo pln\u00e9 zklam\u00e1n\u00ed. A\u017e jsem objevil slu\u017ebu, kter\u00e1 to zvl\u00e1dla a moje Drupal projekty tam svi\u0161t\u00ed k naprost\u00e9 spokojenosti za necel\u00e1\u00a03 kila m\u011bs\u00ed\u010dn\u011b.<\/span><\/p>\n\n<h2><span>Cloudways<\/span><\/h2>\n\n<p><span>Ne\u017e budeme pokra\u010dovat, prohla\u0161uji, \u017ee se pole\u010dnost\u00ed nem\u00e1m \u017e\u00e1dn\u00fd vztah a tento \u010dl\u00e1nek pouze reflektuje moje osobn\u00ed zku\u0161enosti a nenesu zodpov\u011bdnost v p\u0159\u00edpad\u011b, \u017ee va\u0161e zku\u0161enosti budou jin\u00e9. N\u00ed\u017ee jsou uvedeny 2 odkazy. Prvn\u00ed obsahuje affiliate identifik\u00e1tor;\u00a0pokud na n\u011bj kliknete a j\u00e1 bych z toho n\u011bkdy m\u011bl n\u011bjak\u00fd finan\u010dn\u00ed prosp\u011bch, \u010destn\u011b prohla\u0161uji, \u017ee ho r\u00e1d a transparentn\u011b v\u011bnuji \u010desk\u00e9 Drupal asociaci na podporu \u010desk\u00e9 Drupal komunity. Druh\u00fd odkaz je bez identifik\u00e1toru a pou\u017eijte ho v p\u0159\u00edpad\u011b, \u017ee chcete m\u00edt naprostou jistotu, \u017ee ani j\u00e1 ani \u010desk\u00e1 Asociace pro Drupal z toho nic m\u00edt nebude.<\/span><\/p>\n\n<p><a href=\"https:\/\/www.cloudways.com\/en\/drupal-cloud-hosting.php?id=255492&amp;amp;a_bid=a8d5bda6\"><code><span>Cloudways - Faster Drupal Hosting<\/span><\/code><\/a><code><span> (str\u00e1nka v\u011bnovan\u00e1 hostingu pro Drupal)<\/span><\/code><\/p>\n\n<p><a href=\"https:\/\/www.cloudways.com\"><code><span>Cloudways<\/span><\/code><\/a><code><span> - hlavn\u00ed str\u00e1nka<\/span><\/code><\/p>\n\n<p><span>Klikn\u011bte a vytvo\u0159te si testovac\u00ed \u00fa\u010det zdarma. Je omezen\u00fd na 3 dny. Nejprve si zalo\u017ete server. Dejte mu jm\u00e9no, zadejte druh a n\u00e1zev aplikace. Na ka\u017ed\u00e9m serveru m\u016f\u017eete m\u00edt v\u00edce tzv. aplikac\u00ed, co\u017e jsou vlastn\u011b hostingy pro jednotliv\u00e9 dom\u00e9ny. V\u00e1\u0161 Drupal 8 projekt je tedy z hlediska Cloudways aplikac\u00ed. A\u010d m\u016f\u017eete vybrat, \u017ee chcete zalo\u017eit Drupal 8 aplikaci, doporu\u010duji v\u00e1m zakl\u00e1dat Drupal projekty jako<\/span><span> <\/span><span>\u201cPHP<\/span><span> Custom App\u201d, proto\u017ee nechcete nic p\u0159edinstalov\u00e1vat. Vyberte si, kde v\u00e1\u0161 server bude le\u017eet. Z hlediska ceny doporu\u010duji DigitalOcean s 1 GB RAM za 10 dolar\u016f m\u011bs\u00ed\u010dn\u011b a klikn\u011bte na \"Launch now\". K tomuto serveru budete p\u0159istupovat p\u0159es slu\u017ebu Cloudways, kter\u00e1 server nakonfiguruje a poskytne webov\u00e9 administra\u010dn\u00ed rozhran\u00ed. Za p\u00e1r minut je v\u0161e p\u0159ipraveno.\u00a0<\/span><\/p>\n\n<p><span>P<\/span><span><em>ozn.: Jeliko\u017e j\u00e1 u\u017e server m\u00e1m, nev\u00edm p\u0159esn\u011b, jak jdou \u00fakony po sob\u011b, kdy\u017e se zakl\u00e1d\u00e1 nov\u00fd server, proto pros\u00edm pou\u017eijte p\u0159irozenou inteligenci a zorientujte se v ovl\u00e1d\u00e1n\u00ed Cloudways, p\u0159\u00edpadn\u011b pou\u017eijte rozs\u00e1hlou n\u00e1pov\u011bdu.<\/em><\/span><\/p>\n\n<p><img alt=\"\" src=\"https:\/\/photos-1.dropbox.com\/t\/2\/AABjA8prG_YxGH8-ul5-Lmt-Wl6NvkVcVAx2t2P5rFcnSw\/12\/83194090\/png\/2048x1\/5\/1544554800\/0\/10\/image.png\/_\/png%2520https%253A%252F%252Fd2mxuefqeaa7sj.cloudfront.net%252Fs_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543782138363_file.png?preserve_transparency=1&amp;size=2048x1&amp;size_mode=5\" \/><\/p>\n\n<p><span>P\u00e1r d\u016fle\u017eit\u00fdch m\u00edst v administraci:<\/span><\/p>\n\n<h3><span>Server management<\/span><\/h3>\n\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Master credentials<\/em><\/span><span> si nahrajte <\/span><span><span>SSH kl\u00ed\u010d<\/span><\/span><span> a pod\u00edvejte se, jakou m\u00e1te IP adresu. SSH kl\u00ed\u010d\u016f se nebojte, slo\u017eit\u011b to jen vypad\u00e1 a u\u0161et\u0159\u00ed to mnoho \u010dasu, proto\u017ee m\u00edsto zad\u00e1v\u00e1n\u00ed hesla v\u00e1s server pozn\u00e1 podle kl\u00ed\u010de. Pokud pot\u0159ebujete, pod\u00edvejte se na n\u00e1pov\u011bdu, t\u0159eba na GitHubu <\/span><span><a href=\"https:\/\/help.github.com\/articles\/connecting-to-github-with-ssh\">https:\/\/help.github.com\/articles\/connecting-to-github-with-ssh<\/a><\/span><span>. Pokud byste to z n\u011bjak\u00e9ho d\u016fvodu odm\u00edtali, je samoz\u0159ejm\u011b mo\u017enost ponechat autentizaci na klasick\u00fdch metod\u00e1ch pomoc\u00ed jm\u00e9na a hesla.<\/span><\/p>\n\n<h3><span>Aplication management<\/span><\/h3>\n\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Access detail<\/em><\/span><span> m\u00e1te p\u0159id\u011blenou testovac\u00ed URL adresu pro v\u00e1\u0161 web a m\u016f\u017eete si nastavit heslo k datab\u00e1zi.<\/span><\/p>\n\n<p><span>V z\u00e1lo\u017ece <\/span><span><em>Application Settings<\/em><\/span><span> si nastavte polo\u017eku Folder na n\u00e1zev projektu<\/span><span> <\/span><span>(d8workshop).<\/span><span> Je to n\u00e1zev adres\u00e1\u0159e a pom\u016f\u017ee v\u00e1m to v orientaci. Soubory projektu pak snadno najdete v adres\u00e1\u0159i <\/span><span><strong>~\/applications\/d8workshop\/public_html<\/strong><\/span><span>. Tuto cestu budete pot\u0159ebovat zn\u00e1t.<\/span><\/p>\n\n<p><span><span><img alt=\"\" height=\"287\" src=\"https:\/\/d2mxuefqeaa7sj.cloudfront.net\/s_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543785494473_file.png\" width=\"234\" \/><\/span><\/span><\/p>\n\n<p><span>Jakmile m\u00e1te vytvo\u0159en\u00fd hosting pro v\u00e1\u0161 projekt, m\u016f\u017eeme se kone\u010dn\u011b dostat k n\u00e1vodu na deployment.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<h2><span>Deployment - pot\u0159ebn\u00e9 znalosti a dovednosti<\/span><\/h2>\n\n<p><span>Tento \u010dl\u00e1nek p\u0159edpokl\u00e1d\u00e1, \u017ee toto m\u00e1te a zn\u00e1te:<\/span><\/p>\n\n<ul><li><span>Pr\u00e1ci s Gitem - nemus\u00edte um\u011bt Git p\u0159\u00edkazy, pokud m\u00e1te grafickou aplikaci pro pr\u00e1ci s gitem. J\u00e1 budu uv\u00e1d\u011bt p\u0159\u00edkazy a vy si najd\u011bte, jak se to ve va\u0161\u00ed aplikaci d\u011bl\u00e1.<\/span><\/li>\n\t<li><span>Z\u00e1kladn\u00ed pr\u00e1ci s Composerem - ten n\u00e1m bude nahr\u00e1vat Drupal, moduly a z\u00e1vislosti.<\/span><\/li>\n\t<li><span>Drush - budu pou\u017e\u00edvat Drush p\u0159\u00edkazy, proto\u017ee je to jednodu\u0161\u0161\u00ed a proto\u017ee jsme p\u0159ece prof\u00edci, ne?<\/span><\/li>\n\t<li><span>Prost\u0159ed\u00ed p\u0159\u00edkazov\u00e9 \u0159\u00e1dky - budete na serveru pracovat vzd\u00e1len\u011b, tak\u017ee abyste ch\u00e1pali, co d\u011bl\u00e1te<\/span><span> <\/span><span>(cd,<\/span><span> ls, mkdir apod...)<\/span><\/li>\n\t<li><span>SSH kl\u00ed\u010d - p\u0159edpokl\u00e1d\u00e1m, \u017ee m\u00e1te SSH kl\u00ed\u010d, jeho\u017e ve\u0159ejnou \u010d\u00e1st jste nahr\u00e1li na server.<\/span><\/li>\n\t<li><span>Um\u00edte nainstalovat Drupal, ch\u00e1pete config management a dal\u0161\u00ed z\u00e1kladn\u00ed v\u011bci, kter\u00e9 byly nap\u0159. p\u0159edm\u011btem workshopu Radima Kla\u0161ky, kter\u00fd m\u016f\u017eete naj\u00edt na <\/span><span><a href=\"https:\/\/github.com\/Drupalcz\/workshop\">https:\/\/github.com\/Drupalcz\/workshop<\/a><\/span><span> a v README.md je n\u00e1vod, jak nainstalovat Drupal projekt. V tomto n\u00e1vodu budeme s projektem z tohoto repozit\u00e1\u0159e pracovat. Av\u0161ak m\u016f\u017eete pracovat i se sv\u00fdm vlastn\u00edm \u010di jin\u00fdm existuj\u00edc\u00edm projektem.<\/span><\/li>\n\t<li><span>M\u00e1te na sv\u00e9m po\u010d\u00edta\u010di rozb\u011bhnut\u00fd projekt z v\u00fd\u0161e uveden\u00e9ho bodu.<\/span><\/li>\n<\/ul><h2><span>Jak na to<\/span><\/h2>\n\n<p><span>Na\u0161\u00edm c\u00edlem je vytvo\u0159it si na Cloudways serveru vzd\u00e1len\u00fd git repozit\u00e1\u0159 a nakonfigurovat ho tak, aby jakmile p\u0159ijme n\u011bjak\u00e9 zm\u011bny, p\u0159enesl automaticky tyto zm\u011bny do prostoru webhostingu a provedl instala\u010dn\u00ed p\u0159\u00edkazy.<\/span><\/p>\n\n<h3><span>SSH p\u0159ipojen\u00ed<\/span><\/h3>\n\n<p><span>Nejprve si nakonfigurujeme SSH spojen\u00ed, abychom nemuseli zad\u00e1vat heslo a nic n\u00e1s nezdr\u017eovalo. Najd\u011bte v dom\u00e1c\u00edm adres\u00e1\u0159i soubor <\/span><span><em>.ssh\/config<\/em><\/span><span> a vlo\u017ete do n\u011bj<\/span><\/p>\n\n<p><code><span>Host <\/span><span><span>cloudways<\/span><\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 Hostname <\/span><span><strong>ip_va\u0161eho_serveru<\/strong><\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 User <\/span><span><strong>master_login_username<\/strong><\/span><\/code><\/p>\n\n<p><span>N\u00e1zev serveru si vymyslete\u00a0podle pot\u0159eby, j\u00e1 jsem pou\u017eil<\/span><span> <\/span><span>\u201ccloudways\u201d.<\/span><span> U\u017eivatelsk\u00e9 jm\u00e9no a IP adresu \u00a0najdete v z\u00e1lo\u017ece <em>Server management<\/em> - <em>Master credentials<\/em>. Ulo\u017ete\u00a0a pak napi\u0161te do termin\u00e1lu:<\/span><\/p>\n\n<p><code><span>ssh cloudways<\/span><\/code><\/p>\n\n<p><span>...a m\u011bli byste tam b\u00fdt.<\/span><\/p>\n\n<h2><span>Vzd\u00e1len\u00fd git repozit\u00e1\u0159<\/span><\/h2>\n\n<p><span>Nyn\u00ed vytvo\u0159\u00edme vzd\u00e1len\u00fd git repozit\u00e1\u0159 v adres\u00e1\u0159i <\/span><span><strong>git_repos<\/strong><\/span><span>. Je dobr\u00fdm zvykem pojmenov\u00e1vat repozit\u00e1\u0159e s p\u0159\u00edponou .git. Git repozit\u00e1\u0159 je technicky vzato adres\u00e1\u0159, tak\u017ee ten v na\u0161em n\u00e1vodu pojmenujeme <\/span><span><strong>d8workshop.git<\/strong><\/span><span>. Tento repozit\u00e1\u0159 bude p\u0159ij\u00edmat na\u0161e zm\u011bny jako pomysln\u00fd<\/span><span> <\/span><span>\u201cdal\u0161\u00ed<\/span><span> \u010dlen na\u0161eho t\u00fdmu\u201d. Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\n\n<p><code><span>mkdir git_repos<\/span><\/code><\/p>\n\n<p><code><span>cd git_repos<\/span><\/code><\/p>\n\n<p><code><span>mkdir d8workshop.git<\/span><\/code><\/p>\n\n<p><code><span>cd d8workshop.git<\/span><\/code><\/p>\n\n<p><code><span>git init --bare<\/span><\/code><\/p>\n\n<p><span>Posledn\u00edm p\u0159\u00edkazem jsme vytvo\u0159ili strukturu pr\u00e1zdn\u00e9ho <\/span><span>git<\/span><span> repozit\u00e1\u0159e a m\u011bli bychom vid\u011bt zpr\u00e1vu:<\/span><\/p>\n\n<p><code><span>Initialized empty Git repository in \/home\/master\/git_repos\/d8workshop.git\/<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<h2><span>Vytvo\u0159en\u00ed sluhy<\/span><\/h2>\n\n<p><span>Vytvo\u0159\u00edme si v adres\u00e1\u0159i <\/span><span><strong>hooks<\/strong><\/span><span> v\u011brn\u00e9ho sluhu. Ten nikdy nesp\u00ed a \u010dek\u00e1, a\u017e se v repozit\u00e1\u0159i n\u011bco nov\u00e9ho objev\u00ed. Jakmile zahl\u00e9dne zm\u011bnu, v\u0161echny soubory v repozit\u00e1\u0159i vykop\u00edruje na n\u00e1\u0161 hosting, co\u017e je technicky jen jin\u00fd adres\u00e1\u0159, a provede s\u00e9rii p\u0159\u00edkaz\u016f k instalaci zm\u011bn do na\u0161eho Drupal projektu. Nejprve si vzpome\u0148te, \u017ee adres\u00e1\u0159 s aplikac\u00ed<\/span><span> <\/span><span>(hostingem)<\/span><span> je <\/span><span><strong>~\/applications\/d8workshop\/public_html<\/strong><\/span><span>.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>Vytvo\u0159en\u00ed nov\u00e9ho souboru post-receive. Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\n\n<p><code><span>cd hooks<\/span><\/code><\/p>\n\n<p><code><span>nano post-receive<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>Do otev\u0159en\u00e9ho editoru vlo\u017ete:<\/span><\/p>\n\n<p><code><span>#!\/bin\/bash<\/span><\/code><\/p>\n\n<p><code><span>GIT_DIR=\"\/home\/master\/git_repos\/d8workshop.git\"<\/span><\/code><\/p>\n\n<p><code><span>TARGET=\"\/home\/master\/applications\/d8workshop\/public_html\"<\/span><\/code><\/p>\n\n<p><code><span>BRANCH=\"master\"<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><code><span>while read oldrev newrev ref<\/span><\/code><\/p>\n\n<p><code><span>do<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 # only checking out the specified branch you would like to deploy<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 if [[ $ref = refs\/heads\/$BRANCH ]];<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 then<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 echo \"Ref $ref received. Deploying ${BRANCH} branch to ${TARGET}...\"<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 git --git-dir=$GIT_DIR --work-tree=$TARGET checkout\u00a0${BRANCH} -f<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 # You will place more commands HERE...<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 echo \"Finished.\"<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 else<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 echo \"Ref $ref received. Only the ${BRANCH} branch may be deployed on this server.\"<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 fi<\/span><\/code><\/p>\n\n<p><code><span>done<\/span><\/code><\/p>\n\n<p><span>Ulo\u017ete a zav\u0159ete<\/span><span> <\/span><span>(Ctrl+O,<\/span><span> Enter, Ctrl-X). N\u00e1\u0161 sluha \u010dek\u00e1, zda byla p\u0159ijata zm\u011bna ve v\u011btvi<\/span><span> <\/span><span>(branch)<\/span><span> <\/span><span>\u201cmaster\u201d.<\/span><span> Pokud ano, vykop\u00edruje v\u0161echny soubory do adres\u00e1\u0159e TARGET a pomoc\u00ed parametru<\/span><span> <\/span><span>-f<\/span><span> p\u0159ep\u00ed\u0161e v\u0161e ji\u017e existuj\u00edc\u00ed. Zat\u00edm nep\u0159id\u00e1v\u00e1me \u017e\u00e1dn\u00e9 instala\u010dn\u00ed p\u0159\u00edkazy. Aby sluha o\u017eil, mus\u00edme ho ozna\u010dit jako spustiteln\u00fd soubor.<\/span><\/p>\n\n<p><code><span>chmod +x post-receive<\/span><\/code><\/p>\n\n<h2><span>Propojen\u00ed projektu se vzd\u00e1len\u00fdm repozit\u00e1\u0159em<\/span><\/h2>\n\n<p><span>N\u00e1\u0161 workshopov\u00fd projekt m\u00e1 sv\u016fj repozit\u00e1\u0159 na Githubu, odkud jsme ho z\u00edskali p\u0159\u00edkazem \"git clone\", ale t\u00edm tak\u00e9 vznikl lok\u00e1ln\u00ed git repozit\u00e1\u0159 p\u0159\u00edmo v adres\u00e1\u0159i projektu, pojmenovan\u00fd jako<\/span><span> <\/span><span>\u201c.git\u201d.<\/span><span> Na na\u0161em serveru m\u00e1me t\u0159et\u00ed repozit\u00e1\u0159. Ka\u017ed\u00fd z t\u011bchto repozit\u00e1\u0159\u016f ukazuje v praxi z\u00e1kladn\u00ed vlastnost gitu, co\u017e je decentralizovanost repozit\u00e1\u0159\u016f, a ka\u017ed\u00fd repozit\u00e1\u0159 p\u0159edstavuje geograficky odd\u011blenou z\u00e1lohu na\u0161eho projektu, co\u017e je dobr\u00fd bonus. Nyn\u00ed propoj\u00edme lok\u00e1ln\u00ed repozit\u00e1\u0159 s t\u00edm vzd\u00e1len\u00fdm na na\u0161em serveru. N\u00e1sleduj\u00edc\u00ed p\u0159\u00edkaz informuje lok\u00e1ln\u00ed repozit\u00e1\u0159, \u017ee p\u0159id\u00e1v\u00e1me \u00a0jeden nov\u00fd vzd\u00e1len\u00fd.<\/span><\/p>\n\n<p><code><span>git remote add cloudways <\/span><span>master<\/span><span>_xxx@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\n\n<p><span>Prvn\u00ed v\u00fdskyt slova<\/span><span> <\/span><span>\u201ccloudways\u201d<\/span><span> je n\u00e1zev vzd\u00e1len\u00e9ho <\/span><span>repozit\u00e1\u0159e<\/span><span>. M\u016f\u017eete si tam d\u00e1t co chcete, t\u0159eba i<\/span><span> <\/span><span>\u201csluha\u201d.<\/span><span> Slovo<\/span><span> <\/span><span>\u201c<\/span><span>master<\/span><span>_xxx@cloudways\u201d<\/span><span> znamen\u00e1, \u017ee se p\u0159ipojujete jako u\u017eivatel <\/span><span><em>master<\/em><\/span><span><em>_xxx<\/em><\/span><span> na server <\/span><span><em>cloudways<\/em><\/span><span>, co\u017e je ozna\u010den\u00ed serveru, kter\u00fd jste definovali v souboru <\/span><span><em>.ssh\/config<\/em><\/span><span>. Text<\/span><span> <\/span><span>\u201c\/home\/master\/git_repos\/d8workshop.git\u201d<\/span><span> je cesta k repozit\u00e1\u0159i na vzd\u00e1len\u00e9m serveru. P\u0159\u00edkaz<\/span><span> <\/span><span>\u201cgit<\/span><span> remote add\u201d nekontroluje, zda je vzd\u00e1len\u00fd repozit\u00e1\u0159 dosa\u017eiteln\u00fd, tak\u017ee\u00a0pokud jste ud\u011blali n\u011bjakou chybu, nedozv\u00edte se to. Proto pou\u017eijte p\u0159\u00edkaz:<\/span><\/p>\n\n<p><code><span>git remote show cloudways<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><code><span>* remote cloudways<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 Fetch URL: master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 Push \u00a0URL: master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 HEAD branch: (unknown)<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>pro na\u010dten\u00ed vzd\u00e1len\u00e9ho repozit\u00e1\u0159e. Pokud se neobjev\u00ed chyby, m\u016f\u017eete\u00a0zkusit poslat projekt na server. P\u0159\u00edkaz m\u00e1 podobu<\/span><\/p>\n\n<p><code><span>git push remote_repo_name branch_name<\/span><\/code><\/p>\n\n<p><span>a umo\u017e\u0148uje v\u00e1m pos\u00edlat na server jakoukoliv v\u00fdvojovou v\u011btev. Av\u0161ak pouze posl\u00e1n\u00ed v\u011btve<\/span><span> <\/span><span>\u201cmaster\u201d<\/span><span> spust\u00ed kop\u00edrov\u00e1n\u00ed soubor\u016f do prostoru webu.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<p><code><span>git push cloudways master\u00a0<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><code><span>Total 0 (delta 0), reused 0 (delta 0)<\/span><\/code><\/p>\n\n<p><code><span>remote: Ref refs\/heads\/master received. Deploying master branch to \/home\/master\/applications\/d8workshop\/public_html...<\/span><\/code><\/p>\n\n<p><code><span>remote: Finished.<\/span><\/code><\/p>\n\n<p><code><span>To master_dhtpbbmznk@cloudways:\/home\/master\/git_repos\/d8workshop.git<\/span><\/code><\/p>\n\n<p><code><span>\u00a0* [new branch] \u00a0 \u00a0 \u00a0master -&gt; master<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>Zkontrolujeme to na serveru p\u0159es SSH.<\/span><\/p>\n\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\n\n<p><code><span>cd ~\/applications\/d8workshop\/public_html\/<\/span><\/code><\/p>\n\n<p><code><span>ls<\/span><\/code><\/p>\n\n<p><span>Vid\u00edme, \u017ee se zde objevily soubory na\u0161eho projektu a tak\u00e9 se zde objevily adres\u00e1\u0159e, zejm\u00e9na adres\u00e1\u0159 web, kter\u00fd by m\u011bl b\u00fdt hlavn\u00edm adres\u00e1\u0159em webu, tzv. Webroot. Jd\u011bte do administrace Cloudways a zm\u011b\u0148te ho z <\/span><span><em>public_html<\/em><\/span><span> na <\/span><span><em>public_html\/web<\/em><\/span><span>. Tuto zm\u011bna lze ud\u011blat a\u017e v okam\u017eiku, kdy adres\u00e1\u0159 existuje, proto jsme ji nemohli\u00a0ud\u011blat d\u0159\u00edve.<\/span><\/p>\n\n<p><img alt=\"\" src=\"https:\/\/photos-4.dropbox.com\/t\/2\/AADXphIze7ceIYE9oIHACnUOrnlGK1jjKbmo65UTtOFI1Q\/12\/83194090\/png\/2048x1\/5\/1544554800\/0\/10\/image.png\/_\/png%2520https%253A%252F%252Fd2mxuefqeaa7sj.cloudfront.net%252Fs_307FD49C2C6A4649BC955C880CC876C12CC1844082F6BC0A281B5652C466F67B_1543789626101_file.png?preserve_transparency=1&amp;size=2048x1&amp;size_mode=5\" \/><\/p>\n\n<h2><span>Nastaven\u00ed Drupalu<\/span><\/h2>\n\n<p><span>Drupal pot\u0159ebuje zn\u00e1t p\u0159\u00edstupy k datab\u00e1zi. Jsou r\u016fzn\u00e9 praxe, kam tyto \u00fadaje zadat;\u00a0nej\u010dast\u011bji to b\u00fdv\u00e1 do settings.php v adres\u00e1\u0159i web\/sites\/default. V na\u0161em p\u0159\u00edpad\u011b lektor Radim, kter\u00fd p\u0159ipravil projekt pro workshop, nechal soubor settings.php p\u0159en\u00e1\u0161et p\u0159es git bez \u00fadaj\u016f k datab\u00e1zi a tyto \u00fadaje se o\u010dek\u00e1vaj\u00ed v souboru settings.local.php, co\u017e je soubor na\u010d\u00edtan\u00fd ze settings.php p\u0159es include. Vzor pro tento soubor se tak\u00e9 p\u0159enesl p\u0159es git jako default.settings.local.php, ale my z n\u011bj vyu\u017eijeme jen malou \u010d\u00e1st, proto\u00a0si ho vytvo\u0159\u00edme \u010dist\u00fd a vlo\u017e\u00edme do n\u011bj pouze p\u0159\u00edstupy k datab\u00e1zi.<\/span><\/p>\n\n<p><span>Soubor otev\u0159ete v editoru a zm\u011b\u0148te \u00fadaje k datab\u00e1zi<\/span><span> <\/span><span>(database,<\/span><span> username, password) podle \u00fadaj\u016f z Aplication management v z\u00e1lo\u017ece <\/span><span><em>Access detail.<\/em><\/span><\/p>\n\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\n\n<p><code><span>nano web\/sites\/default\/settings.local.php<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><code><span>&lt;?php<\/span><\/code><\/p>\n\n<p><code><span>$databases = array(<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 'default' =&gt;<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 array(<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 'default' =&gt;<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 array(<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'database' =&gt; 'xxxxxx',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'username' =&gt; 'xxxxxx',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'password' =&gt; 'supertajneheslo',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'host' =&gt; 'localhost',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'port' =&gt; <\/span><span><span>'3306'<\/span><\/span><span>,<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'driver' =&gt; 'mysql',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 'prefix' =&gt; '',<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 \u00a0 \u00a0 ),<\/span><\/code><\/p>\n\n<p><code><span>\u00a0 \u00a0 ),<\/span><\/code><\/p>\n\n<p><code><span>);<\/span><\/code><\/p>\n\n<p><span>Ulo\u017eit, zav\u0159\u00edt.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<h2><span>Prvn\u00ed instalace - zat\u00edm ru\u010dn\u00ed<\/span><\/h2>\n\n<p><span>Prvn\u00ed instalaci mus\u00edme ud\u011blat v p\u0159\u00edkazov\u00e9 \u0159\u00e1dce ru\u010dn\u011b. Jsme st\u00e1le v adres\u00e1\u0159i \/home\/master\/applications\/d8workshop\/public_html (pokud ne, tak se tam vr\u00e1t\u00edme).<\/span><\/p>\n\n<p><span>Na vzd\u00e1len\u00e9m serveru:<\/span><\/p>\n\n<p><code><span>cd \/home\/master\/applications\/d8workshop\/public_html<\/span><\/code><\/p>\n\n<p><code><span>composer install --no-dev<\/span><\/code><\/p>\n\n<p><span>Tento p\u0159\u00edkaz st\u00e1hne v\u0161echen pot\u0159ebn\u00fd software, kter\u00fd Drupal pot\u0159ebuje. Parametr<\/span><span> <\/span><span>\u2014no-dev<\/span><span> nebude instalovat moduly ze sekce dev, proto\u017ee na stage \u010di produk\u010dn\u00edm serveru je v\u011bt\u0161inou nepot\u0159ebujeme. D\u00e1le nainstalujeme Drupal v\u010detn\u011b existuj\u00edc\u00ed vyexportovan\u00e9 konfigurace.<\/span><\/p>\n\n<p><code><span><span>drush<\/span><\/span><span> si minimal --existing-config -y<\/span><\/code><\/p>\n\n<p><span>Zb\u00fdva zm\u011bnit heslo pro admina.<\/span><\/p>\n\n<p><code><span>drush upwd admin mojesupertajnehoslo<\/span><\/code><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>A je \u010das se pod\u00edvat na web. URL najdete v Aplication management v z\u00e1lo\u017ece <\/span><span><em>Access detail<\/em><\/span><span> a vypad\u00e1 n\u011bjak takto: <\/span><span><a href=\"http:\/\/phpstack-cislo-cislo.cloudwaysapps.com\/\">http:\/\/phpstack-cislo-cislo.cloudwaysapps.com\/<\/a><\/span><span>.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>Gratuluji. M\u00e1te web na serveru, dokonce nakonfigurovan\u00fd. Dal\u0161\u00ed zm\u011bna u\u017e bude automatick\u00e1.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<h2><span>Dopln\u011bn\u00ed p\u0159\u00edkaz\u016f pro sluhu<\/span><\/h2>\n\n<p><span><span>Na vzd\u00e1len\u00e9m serveru<\/span><\/span><span>:<\/span><\/p>\n\n<p><code><span>nano ~\/git_repos\/d8workshop.git\/hooks\/post-receive<\/span><\/code><\/p>\n\n<p><span>a dopl\u0148te p\u0159\u00edkazy pro instalaci zm\u011bn mezi \u0159\u00e1dky git a echo:<\/span><\/p>\n\n<p><code><span>git --git-dir=$GIT_DIR --work-tree=$TARGET checkout\u00a0${BRANCH} -f<\/span><\/code><\/p>\n\n<p><code><span>cd ${TARGET}<\/span><\/code><\/p>\n\n<p><code><span>composer install --no-dev<\/span><\/code><\/p>\n\n<p><code><span>cd ${TARGET}\/web<\/span><\/code><\/p>\n\n<p><code><span>drush cr<\/span><\/code><\/p>\n\n<p><code><span>drush entup -y<\/span><\/code><\/p>\n\n<p><code><span>drush updb -y<\/span><\/code><\/p>\n\n<p><code><span>drush cim -y<\/span><\/code><\/p>\n\n<p><code><span>drush cr<\/span><\/code><\/p>\n\n<p><code><span>echo \"Finished.\"<\/span><\/code><\/p>\n\n<p><span>Pozn\u00e1mka pro experiment\u00e1tory: Pro zjednodu\u0161en\u00ed tohoto n\u00e1vodu jsem zvolil toto p\u0159\u00edmo\u010dar\u00e9 \u0159e\u0161en\u00ed. P\u0159\u00edkazy od \u0159\u00e1dky 2 v\u0161ak m\u016f\u017eete\u00a0um\u00edstit i do extern\u00edho scriptu uvnit\u0159 repozit\u00e1\u0159e, \u010d\u00edm\u017e z\u00edsk\u00e1te mo\u017enost m\u011bnit tyto p\u0159\u00edkazy lok\u00e1ln\u011b a pos\u00edlat je na server spole\u010dn\u011b s ostatn\u00edmi zm\u011bnami p\u0159es Git. Oboha\u0165te \u010dten\u00e1\u0159e va\u0161\u00edm vylep\u0161en\u00fdm scriptem v koment\u00e1\u0159i.<\/span><\/p>\n\n<h2><span>P\u0159enesen\u00ed zm\u011bny na server<\/span><\/h2>\n\n<p><span>Ud\u011blejte<\/span><span> zm\u011bnu na lok\u00e1ln\u00edm projektu, nap\u0159. zm\u011b\u0148te n\u00e1zev webu na str\u00e1nce<\/span><\/p>\n\n<p><span>\/admin\/config\/system\/site-information.<\/span><\/p>\n\n<p><span>Vyexportujte configuraci.<\/span><\/p>\n\n<p><code><span>drush cex<\/span><\/code><\/p>\n\n<p><span>Ozna\u010dte zm\u011bn\u011bn\u00e9 soubory a zapi\u0161te zm\u011bny do m\u00edstn\u00edho repozit\u00e1\u0159e<\/span><span> <\/span><span>(commit).<\/span><\/p>\n\n<p><code><span>git add .<\/span><\/code><\/p>\n\n<p><code><span>git commit -m \"Update site name\"<\/span><\/code><\/p>\n\n<p><span>Nakonec zm\u011bny po\u0161lete na v\u00e1\u0161 Cloudways server.<\/span><\/p>\n\n<p><code><span>git push cloudways master<\/span><\/code><\/p>\n\n<p><span>Sledujte zpr\u00e1vy v consoli a a\u017e uvid\u00edte<\/span><span> <\/span><span>\u201cFinished\u201d,<\/span><span> na\u010dt\u011bte znovu str\u00e1nku projektu na serveru. Uvid\u00edte, \u017ee v\u0161echny zm\u011bny jsou provedeny a n\u00e1zev webu byl p\u0159ejmenov\u00e1n.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>M\u016f\u017eete si pogratulovat. M\u00e1te rychl\u00fd a bezstarostn\u00fd deployment zm\u011bn na server za cenu pod t\u0159i stovky.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<h2><span>Z\u00e1v\u011br<\/span><\/h2>\n\n<p><span>T\u00edmto zp\u016fsobem p\u0159en\u00e1\u0161\u00edte ve\u0161ker\u00e9 zm\u011bny, kter\u00e9 jsou obsa\u017eeny v k\u00f3du, tedy zm\u011bny va\u0161ich custom modul\u016f, va\u0161ich t\u00e9mat vzhledu, CSS, sta\u017een\u00e9 contrib moduly, z\u00e1vislosti a ve\u0161kerou konfiguraci. Pokud pot\u0159ebujete p\u0159en\u00e9st i n\u011bjak\u00fd z\u00e1kladn\u00ed obsah, jako nap\u0159\u00edklad obsah blok\u016f, nebo testovac\u00ed \u010dl\u00e1nek v blogu, pou\u017eijte modul <\/span><span><a href=\"https:\/\/www.drupal.org\/project\/default_content_deploy\">Default Content Deploy<\/a><\/span><span>, kter\u00fd p\u0159en\u00e1\u0161\u00ed obsah do k\u00f3du a zp\u011bt. Modul obsahuje pom\u011brn\u011b podrobnou dokumentaci.<\/span><\/p>\n\n<h3><span>V\u00fdhody<\/span><\/h3>\n\n<p><span>Toto \u0159e\u0161en\u00ed p\u0159esunu zm\u011bn na server m\u00e1 n\u011bkolik dal\u0161\u00edch skryt\u00fdch v\u00fdhod. Do prostoru webrootu se nenahr\u00e1v\u00e1 adres\u00e1\u0159 .git, co\u017e by bylo bezpe\u010dnostn\u00ed riziko (\u0159ada n\u00e1vod\u016f pou\u017e\u00edvaj\u00edc\u00ed opa\u010dn\u00fd princip<\/span><span> <\/span><span>\u201cgit<\/span><span> pull\u201d mus\u00ed adres\u00e1\u0159 .git mazat ru\u010dn\u011b, nebo to ignoruje). D\u00e1le, pokud nechcete, nepot\u0159ebujete \u017e\u00e1dn\u00fd dal\u0161\u00ed repozit\u00e1\u0159, nap\u0159. na GitHubu, GitLabu, Bitbucketu apod. a sta\u010d\u00ed v\u00e1m pouze jeden pro deployment na serveru.<\/span><\/p>\n\n<h3><span><span>Probl\u00e9my<\/span><\/span><\/h3>\n\n<p><span>Repozit\u00e1\u0159 Workshop projektu obsahuje <\/span><span><em>settings.php<\/em><\/span><span> a ten se tedy p\u0159en\u00e1\u0161\u00ed p\u0159i zm\u011bn\u011b do adres\u00e1\u0159e webu. Drupal ale tento soubor blokuje a m\u011bn\u00ed mu atributy tak, aby ne\u0161el editovat. Proto bude git p\u0159i deploymentu vypisovat chybu:<\/span><\/p>\n\n<p><code><span>\u00a0error: unable to unlink old 'web\/sites\/default\/settings.php' (Permission denied)<\/span><\/code><\/p>\n\n<p><span>Nen\u00ed to z\u00e1sadn\u00ed probl\u00e9m, ale po\u010d\u00edtejte s t\u00edm a ve va\u0161ich vlastn\u00edch projektech nechte tento soubor mezi ignorovan\u00fdmi.<\/span><\/p>\n\n<h3>Prostor pro \u010dten\u00e1\u0159e<\/h3>\n\n<p><span>Tento n\u00e1vod shrnuje ur\u010ditou osobn\u00ed praxi, kter\u00e1 rozhodn\u011b nemus\u00ed b\u00fdt nejlep\u0161\u00ed a vyhovuj\u00edc\u00ed v\u017edy a v\u0161em. Nap\u0159. post-receive hook\u016f pro deployment je cel\u00e1 \u0159ada a budu se t\u011b\u0161it na va\u0161e n\u00e1vrhy na vylep\u0161en\u00ed a zku\u0161enosti v koment\u00e1\u0159\u00edch. Tak\u00e9 bych byl r\u00e1d, pokud by se poda\u0159ilo z\u00edskat informace o dal\u0161\u00edch vyhovuj\u00edc\u00edch hostingov\u00fdch slu\u017eb\u00e1ch, jako je Cloudways. Nezapome\u0148te, \u017ee bohatstv\u00ed v\u011bdomost\u00ed Drupal komunity spo\u010d\u00edv\u00e1 ve vz\u00e1jemn\u00e9m sd\u00edlen\u00ed.<\/span><\/p>\n\n<p>\u00a0<\/p>\n\n<p><span>Za technick\u00e9 a jazykov\u00e9 korektury tohoto \u010dl\u00e1nku d\u011bkuji Jakubu Hnili\u010dkovi, Radimu Kla\u0161kovi a Ev\u011b R\u00e1zgov\u00e9.<\/span><\/p>",
            "summary": "",
            "lang": "cs"
        }
    ],
    "field_teaser_text": [
        {
            "value": "N\u00e1vod, jak pos\u00edlat Drupal 8 projekty na testovac\u00ed a produk\u010dn\u00ed server bez n\u00e1mahy a za p\u00e1r korun.",
            "lang": "cs"
        }
    ]
}